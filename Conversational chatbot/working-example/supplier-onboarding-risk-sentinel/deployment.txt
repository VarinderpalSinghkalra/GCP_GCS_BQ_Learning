gcloud functions deploy onboard_supplier \
  --gen2 \
  --runtime python312 \
  --region us-central1 \
  --source . \
  --entry-point onboard_supplier_http \
  --trigger-http \
  --allow-unauthenticated \
  --memory 512MB

gcloud functions deploy quotation_gcs_to_bq \
  --gen2 \
  --runtime python312 \
  --region us-central1 \
  --source . \
  --entry-point quotation_gcs_to_bq \
  --trigger-event google.storage.object.finalize \
  --trigger-resource supplier-onboarding-risk-sentinel \
  --memory 512MB



gcloud run services logs read onboard-supplier   --region us-central1   --project platform-support-analyst-57565   --limit 50


  curl -X POST https://us-central1-data-engineering-479617.cloudfunctions.net/onboard_supplier \
  -H "Content-Type: application/json" \
  -d '{
    "supplier_name": "ABC Software ",
    "country": "US",
    "supplier_type": "COMPANY"
  }'


curl -X POST https://us-central1-data-engineering-479617.cloudfunctions.net/onboard_supplier \
  -H "Content-Type: application/json" \
  -d '{
    "supplier_name": "Teh Industrial Systems",
    "country": "IR",
    "supplier_type": "COMPANY"
  }'


curl -X POST https://us-central1-data-engineering-479617.cloudfunctions.net/onboard_supplier \
  -H "Content-Type: application/json" \
  -d '{
    "supplier_name": "Te Industrial Systems",
    "country": "IR",
    "supplier_type": "COMPANY"
  }'






curl -X POST https://us-central1-data-engineering-479617.cloudfunctions.net/onboard_supplier \
  -H "Content-Type: application/json" \
  -d '{
    "supplier_name": "Tehh Industrial Systems",
    "country": "IR",
    "supplier_type": "COMPANY"
  }'



gcloud iam service-accounts create adk-local \
  --project=data-engineering-479617 \
  --display-name="ADK Local Development SA"

# Vertex AI (Gemini)
gcloud projects add-iam-policy-binding data-engineering-479617 \
  --member="serviceAccount:adk-local@data-engineering-479617.iam.gserviceaccount.com" \
  --role="roles/aiplatform.user"

# Firestore (test data)
gcloud projects add-iam-policy-binding data-engineering-479617 \
  --member="serviceAccount:adk-local@data-engineering-479617.iam.gserviceaccount.com" \
  --role="roles/datastore.user"

# Logging
gcloud projects add-iam-policy-binding data-engineering-479617 \
  --member="serviceAccount:adk-local@data-engineering-479617.iam.gserviceaccount.com" \
  --role="roles/logging.logWriter"

gcloud auth activate-service-account \
  adk-local@data-engineering-479617.iam.gserviceaccount.com \
  --key-file adk-local-key.json











