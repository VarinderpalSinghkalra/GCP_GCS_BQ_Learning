gcloud services enable \
  sqladmin.googleapis.com \
  serviceusage.googleapis.com \
  iamcredentials.googleapis.com

gcloud sql instances create inventory-db \
  --database-version=POSTGRES_14 \
  --cpu=1 \
  --memory=3840MB \
  --region=us-central1 \
  --root-password=admin \
  --availability-type=zonal



  gcloud sql instances describe inventory-db --format="value(state)"

gcloud sql databases create inventory_db \
  --instance=inventory-db


  gcloud sql instances patch inventory-db \
  --authorized-networks=0.0.0.0/0


wget https://storage.googleapis.com/cloud-sql-connectors/cloud-sql-proxy/v2.8.0/cloud-sql-proxy.linux.amd64 -O cloud-sql-proxy
chmod +x cloud-sql-proxy


psql -h 127.0.0.1 -p 5432 -U postgres -d inventory_db



./cloud-sql-proxy \
  <NEW_PROJECT_ID>:us-central1:inventory-db \
  --address=127.0.0.1 \
  --port=5432


psql -h 127.0.0.1 -p 5432 -U postgres -d inventory_db



CREATE EXTENSION IF NOT EXISTS pgcrypto;

CREATE TABLE inventory (
    item_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    item_name TEXT NOT NULL,
    sku TEXT UNIQUE NOT NULL,
    quantity INT NOT NULL CHECK (quantity >= 0),
    warehouse_id TEXT NOT NULL,
    status TEXT DEFAULT 'AVAILABLE',
    last_updated TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);


INSERT INTO inventory (item_name, sku, quantity, warehouse_id) VALUES
('screws', 'screws', 2500, 'DEFAULT-WH'),
('bolts', 'bolts', 1800, 'DEFAULT-WH'),
('nuts', 'nuts', 3000, 'DEFAULT-WH'),
('washers', 'washers', 2200, 'DEFAULT-WH'),
('nails', 'nails', 5000, 'DEFAULT-WH'),
('hinges', 'hinges', 400, 'DEFAULT-WH'),
('anchors', 'anchors', 900, 'DEFAULT-WH'),
('rivets', 'rivets', 1200, 'DEFAULT-WH'),
('clamps', 'clamps', 350, 'DEFAULT-WH'),
('brackets', 'brackets', 800, 'DEFAULT-WH'),
('springs', 'springs', 650, 'DEFAULT-WH'),
('gaskets', 'gaskets', 1400, 'DEFAULT-WH'),
('o_rings', 'o_rings', 2000, 'DEFAULT-WH'),
('bearings', 'bearings', 300, 'DEFAULT-WH'),
('couplings', 'couplings', 270, 'DEFAULT-WH'),
('valves', 'valves', 180, 'DEFAULT-WH'),
('pipes', 'pipes', 500, 'DEFAULT-WH'),
('fittings', 'fittings', 1200, 'DEFAULT-WH'),
('cables', 'cables', 1000, 'DEFAULT-WH'),
('switches', 'switches', 600, 'DEFAULT-WH'),
('connectors', 'connectors', 1600, 'DEFAULT-WH');


